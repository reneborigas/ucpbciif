<div class="row" ng-controller="LoanInfoController">
    <div class="col-xl-12">
        <div class="card card-custom gutter-b">
            <div class="card-body">
                <div class="d-flex">
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                            <div class="mr-3">
                                <a
                                    href="#"
                                    class="d-flex align-items-center text-dark text-hover-primary font-size-h5 font-weight-bold mr-3"
                                >
                                    Loan No. {{ loan.id }}
                                    <span class="label label-light-info label-inline font-weight-bolder ml-2">
                                        {{loan.status_name}}
                                    </span>
                                    <!-- <i class="fas fa-check-circle text-success icon-md ml-2"></i> -->
                                </a>
                            </div>
                            <div class="my-lg-0 my-1">
                                <a
                                    href="#"
                                    class="btn btn-sm btn-light-success font-weight-bolder text-uppercase mr-3"
                                    ng-click="previewCheckRelease(loan.id)"
                                >
                                    Print Check
                                </a>
                                <button
                                    class="btn btn-sm btn-info font-weight-bolder text-uppercase"
                                    ng-click="newPayment(loan.id)"
                                    ng-if="loan.dateReleased"
                                    ng-disabled="loan.outStandingBalance <= 0"
                                >
                                    New Payment
                                </button>
                            </div>
                        </div>
                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                            <div class="mr-3">
                                <div class="d-flex flex-wrap my-2">
                                    <span class="text-muted font-weight-bold mr-2">Borrower :</span>
                                    <a
                                        href="#"
                                        class="text-muted text-hover-primary font-weight-bold mr-lg-8 mr-5 mb-lg-0 mb-2"
                                        ng-click="viewBorrower(loan.borrower)"
                                    >
                                        {{ loan.borrower_name }}
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div class="d-flex align-items-center flex-wrap justify-content-between">
                            <div class="flex-grow-1 font-weight-bold text-dark-50 py-5 py-lg-2 mr-5">
                                Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                <br />
                                Donec rhoncus dapibus dolor, sollicitudin porttitor felis sollicitudin ut.
                                <br />
                                Etiam elementum neque non tempor dapibus.
                            </div>
                            <div class="d-flex flex-wrap align-items-center py-2">
                                <div class="d-flex align-items-center mr-10" ng-show="loan.dateReleased">
                                    <div class="mr-6">
                                        <div class="font-weight-bold mb-2">Release Date</div>
                                        <span
                                            class="btn btn-sm btn-text btn-light-primary text-uppercase font-weight-bold"
                                        >
                                            {{ loan.dateReleased | date: 'mediumDate' }}
                                        </span>
                                    </div>
                                    <div class="mr-6">
                                        <div class="font-weight-bold mb-2">Approval Date</div>
                                        <span
                                            class="btn btn-sm btn-text btn-light-primary text-uppercase font-weight-bold"
                                        >
                                            {{ loan.creditLine_dateApproved | date: 'mediumDate' }}
                                        </span>
                                    </div>
                                    <div class="">
                                        <div class="font-weight-bold mb-2">Expiry Date</div>
                                        <span
                                            class="btn btn-sm btn-text btn-light-danger text-uppercase font-weight-bold"
                                        >
                                            {{ loan.creditLine_dateExpired | date: 'mediumDate' }}
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="separator separator-solid my-7"></div>
                <div class="d-flex align-items-center flex-wrap">
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-calendar-week icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Program</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.loanProgram_name }}
                            </span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Credit Line Amount</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.creditLine_amount | currency :'₱'}}
                            </span>
                        </div>
                    </div>

                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Loan Amount</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.amount | currency :'₱'}}
                            </span>
                        </div>
                    </div>

                    <!-- <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Remaining Credit Line Amount</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ document.creditLine.remainingCreditLine | currency :'₱'}}
                            </span>
                        </div>
                    </div> -->
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-percentage icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Interest Rate</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.interestRate_amount   }}
                                <span>%</span>
                            </span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-calendar-week icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Term</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.term_name }}
                            </span>
                        </div>
                    </div>
                </div>

                <div class="d-flex align-items-center flex-wrap" ng-if="loan.dateReleased">
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Total Obligation</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.totalObligations | currency :'₱'}}
                            </span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Total Interest</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.totalAmortizationInterest | currency :'₱'}}
                            </span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Outstanding Balance</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.outStandingBalance | currency :'₱'}}
                            </span>
                        </div>
                    </div>

                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Principal Balance</span>
                            <span class="font-weight-bolder font-size-h5" ng-if="loan.latestPayment">
                                {{ loan.latestPayment.outStandingBalance | currency :'₱'}}
                            </span>
                            <span class="font-weight-bolder font-size-h5" ng-if="!loan.latestPayment">
                                {{ loan.totalObligations | currency :'₱'}}
                            </span>
                        </div>
                    </div>

                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Interest Balance</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.interestBalance | currency :'₱'}}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- <div class="card card-custom gutter-b">
            <div class="card-header align-items-center border-0 mt-4">
                <h3 class="card-title align-items-start flex-column">
                    <span class="font-weight-bolder text-dark">Existing Accommodations</span>
                </h3>
            </div>
            <div class="card-body">
                <div class="d-flex">
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                            <div class="table-responsive">
                                <table
                                    class="table table-head-custom table-head-bg table-vertical-center table-borderless"
                                >
                                    <tbody>
                                        <tr>
                                            <td class="py-2 pl-7">
                                                <div class="d-flex align-items-center pb-2">
                                                    <a
                                                        href="#"
                                                        class="text-dark-75 font-weight-bolder text-hover-primary mb-1 font-size-lg"
                                                    >
                                                        Loan Window
                                                    </a>
                                                </div>
                                                <div class="d-flex align-items-center pb-2">
                                                    <a
                                                        href="#"
                                                        class="text-dark-75 font-weight-bolder text-hover-primary mb-1 font-size-lg"
                                                    >
                                                        Credit Line Amount
                                                    </a>
                                                </div>
                                                <div class="d-flex align-items-center pb-2">
                                                    <a
                                                        href="#"
                                                        class="text-dark-75 font-weight-bolder text-hover-primary mb-1 font-size-lg"
                                                    >
                                                        Approval Date
                                                    </a>
                                                </div>
                                                <div class="d-flex align-items-center pb-2">
                                                    <a
                                                        href="#"
                                                        class="text-dark-75 font-weight-bolder text-hover-primary mb-1 font-size-lg"
                                                    >
                                                        Expiry Date
                                                    </a>
                                                </div>
                                                <div class="d-flex align-items-center pb-2">
                                                    <a
                                                        href="#"
                                                        class="text-dark-75 font-weight-bolder text-hover-primary mb-1 font-size-lg"
                                                    >
                                                        Total Availments
                                                    </a>
                                                </div>
                                            </td>
                                            <td class="py-2" ng-repeat="window in windows">
                                                <div class="pb-2">
                                                    <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                                                        {{ window.name}}
                                                    </span>
                                                </div>
                                                <div class="pb-2">
                                                    <span
                                                        class="text-dark-75 font-weight-bolder d-block font-size-lg"
                                                        ng-bind="window.activeCreditLine ? (window.activeCreditLine.amount | currency :'₱') : '₱0.00'"
                                                    ></span>
                                                </div>
                                                <div class="pb-2">
                                                    <span
                                                        class="text-dark-75 font-weight-bolder d-block font-size-lg"
                                                        ng-bind="window.activeCreditLine ? (window.activeCreditLine.dateApproved | date : 'mediumDate') : 'N/A'"
                                                    ></span>
                                                </div>
                                                <div class="pb-2">
                                                    <span
                                                        class="text-dark-75 font-weight-bolder d-block font-size-lg"
                                                        ng-bind="window.activeCreditLine ? (window.activeCreditLine.dateExpired | date : 'mediumDate') : 'N/A'"
                                                    ></span>
                                                </div>
                                                <div class="pb-2">
                                                    <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                                                        {{ window.totalAvailments | currency :'₱'}}
                                                    </span>
                                                </div>
                                            </td>
                                            <td>
                                                <div class="pb-2">
                                                    <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                                                        Total
                                                    </span>
                                                </div>
                                                <div class="pb-2">
                                                    <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                                                        &nbsp;
                                                    </span>
                                                </div>
                                                <div class="pb-2">
                                                    <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                                                        &nbsp;
                                                    </span>
                                                </div>
                                                <div class="pb-2">
                                                    <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                                                        &nbsp;
                                                    </span>
                                                </div>
                                                <div class="pb-2">
                                                    <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                                                        {{ borrower.totalAvailments | currency :'₱'}}
                                                    </span>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                                <div
                                    class="d-flex justify-content-center align-items-center flex-wrap"
                                    ng-if="pageRangeDocument((borrower.documents | filter: {subProcess:{id:subProcess.id}}).length).length > 1"
                                >
                                    <div class="d-flex flex-wrap py-2 mr-3">
                                        <button
                                            href="#"
                                            class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                            ng-disabled="currentPageDocument(subProcess) == 0"
                                            ng-click="gotoPrevDocument(subProcess)"
                                        >
                                            <i class="fas fa-chevron-left icon-sm"></i>
                                        </button>
                                        <button
                                            href="#"
                                            class="btn btn-circle btn-icon btn-xs border-0 btn-hover-primary mr-2 my-1"
                                            ng-class="{ 'active' : n == currentPageDocument(subProcess) + 1 }"
                                            ng-repeat="n in pageRangeDocument(borrower.documents.length)"
                                            ng-click="jumpToPageDocument(n,subProcess)"
                                        >
                                            <small>{{n}}</small>
                                        </button>
                                        <button
                                            href="#"
                                            class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                            ng-disabled="currentPageDocument(subProcess) >=borrower.documents.length/pageSizeDocument - 1"
                                            ng-click="gotoNextDocument(subProcess)"
                                        >
                                            <i class="fas fa-chevron-right icon-sm"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- <div class="card card-custom gutter-b">
            <div class="card-header align-items-center border-0 mt-4">
                <h3 class="card-title align-items-start flex-column">
                    <span class="font-weight-bolder text-dark">Existing Accommodations</span>
                </h3>
            </div>
            <div class="card-body p-0">
                <div class="table-responsive">
                    <table class="table table-borderless mb-8" align="center">
                        <tbody>
                            <tr>
                                <td class="p-0" width="18%">
                                    <div class="py-3 pl-24 bg-secondary">
                                        <a href="#" class="text-dark-75 font-weight-bolder font-size-lg">
                                            Loan Window
                                        </a>
                                    </div>
                                    <div class="py-3 pl-24 bg-light">
                                        <a href="#" class="text-dark-75 font-weight-bolder font-size-lg">
                                            Credit Line Amount
                                        </a>
                                    </div>
                                    <div class="py-3 pl-24 bg-secondary">
                                        <a href="#" class="text-dark-75 font-weight-bolder font-size-lg">
                                            Approval Date
                                        </a>
                                    </div>
                                    <div class="py-3 pl-24 bg-light">
                                        <a href="#" class="text-dark-75 font-weight-bolder font-size-lg">
                                            Expiry Date
                                        </a>
                                    </div>
                                    <div class="py-3 pl-24 bg-secondary">
                                        <a href="#" class="text-dark-75 font-weight-bolder font-size-lg">
                                            Total Availments
                                        </a>
                                    </div>
                                </td>
                                <td class="p-0" ng-repeat="window in windows" style="width: 20%;">
                                    <div class="text-center py-3 bg-secondary">
                                        <span class="text-dark-75 font-weight-normal font-size-lg">
                                            {{ window.name}}
                                        </span>
                                    </div>
                                    <div class="text-center py-3 bg-light">
                                        <span
                                            class="text-dark-75 font-weight-normal font-size-lg"
                                            ng-bind="window.activeCreditLine ? (window.activeCreditLine.amount | currency :'₱') : '₱0.00'"
                                        ></span>
                                    </div>
                                    <div class="text-center py-3 bg-secondary">
                                        <span
                                            class="text-dark-75 font-weight-normal font-size-lg"
                                            ng-bind="window.activeCreditLine ? (window.activeCreditLine.dateApproved | date : 'mediumDate') : 'N/A'"
                                        ></span>
                                    </div>
                                    <div class="text-center py-3 bg-light">
                                        <span
                                            class="text-dark-75 font-weight-normal font-size-lg"
                                            ng-bind="window.activeCreditLine ? (window.activeCreditLine.dateExpired | date : 'mediumDate') : 'N/A'"
                                        ></span>
                                    </div>
                                    <div class="text-center py-3 bg-secondary">
                                        <span class="text-dark-75 font-weight-bolder font-size-lg">
                                            {{ window.totalAvailments | currency :'₱'}}
                                        </span>
                                    </div>
                                </td>
                                <td class="p-0 text-right">
                                    <div class="text-center py-3 bg-secondary">
                                        <span class="text-dark-75 font-weight-normal font-size-lg">
                                            Total
                                        </span>
                                    </div>
                                    <div class="text-center py-3 bg-light">
                                        <span class="text-dark-75 font-weight-normal font-size-lg">
                                            &nbsp;
                                        </span>
                                    </div>
                                    <div class="text-center py-3 bg-secondary">
                                        <span class="text-dark-75 font-weight-normal font-size-lg">
                                            &nbsp;
                                        </span>
                                    </div>
                                    <div class="text-center py-3 bg-light">
                                        <span class="text-dark-75 font-weight-normal font-size-lg">
                                            &nbsp;
                                        </span>
                                    </div>
                                    <div class="text-center py-3 bg-secondary">
                                        <span class="text-dark-75 font-weight-bolder font-size-lg">
                                            {{ borrower.totalAvailments | currency :'₱'}}
                                        </span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div
                        class="d-flex justify-content-center align-items-center flex-wrap"
                        ng-if="pageRangeDocument((borrower.documents | filter: {subProcess:{id:subProcess.id}}).length).length > 1"
                    >
                        <div class="d-flex flex-wrap py-2 mr-3">
                            <button
                                href="#"
                                class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                ng-disabled="currentPageDocument(subProcess) == 0"
                                ng-click="gotoPrevDocument(subProcess)"
                            >
                                <i class="fas fa-chevron-left icon-sm"></i>
                            </button>
                            <button
                                href="#"
                                class="btn btn-circle btn-icon btn-xs border-0 btn-hover-primary mr-2 my-1"
                                ng-class="{ 'active' : n == currentPageDocument(subProcess) + 1 }"
                                ng-repeat="n in pageRangeDocument(borrower.documents.length)"
                                ng-click="jumpToPageDocument(n,subProcess)"
                            >
                                <small>{{n}}</small>
                            </button>
                            <button
                                href="#"
                                class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                ng-disabled="currentPageDocument(subProcess) >=borrower.documents.length/pageSizeDocument - 1"
                                ng-click="gotoNextDocument(subProcess)"
                            >
                                <i class="fas fa-chevron-right icon-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <div class="card card-custom gutter-b" ng-if="loan.dateReleased" ng-init="showAmortizationSchedules = true">
            <div class="card-header align-items-center border-0">
                <h3 class="card-title align-items-start flex-column">
                    <span class="font-weight-bolder text-dark">Amortization Schedule</span>
                    <span class="text-muted mt-3 font-weight-bold font-size-sm">
                        Date Created: {{loan.latestAmortization.dateCreated | date : 'mediumDate' }}
                    </span>
                </h3>
                <div class="card-toolbar">
                    <a
                        href="#"
                        class="btn btn-sm btn-light-success font-weight-bolder text-uppercase mr-3"
                        ng-click="previewAmortizationSchedule(loan.id)"
                    >
                        Preview
                    </a>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="slide" ng-show="showAmortizationSchedules">
                    <div class="table-responsive">
                        <table class="table table-bordered mb-8">
                            <thead class="table-active">
                                <tr>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                No.
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Schedule
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Days
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Principal
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Interest
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                VAT
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Total Amortization
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Principal Balance
                                            </span>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                0
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.latestAmortization.dateReleased | date: 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.amount | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                                <tr ng-repeat="amortization in loan.latestAmortization.amortizationItems">
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{$index+1 }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortization.schedule | date: 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortization.days}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortization.principal | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortization.interest | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortization.vat | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortization.total | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortization.principalBalance | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-success">
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                Total
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.amount | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.totalAmortizationInterest | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex justify-content-center p-0">
                <a class="btn btn-icon" ng-click="showAmortizationSchedules = !showAmortizationSchedules">
                    <i
                        class="wide text-warning"
                        ng-class=" showAmortizationSchedules ? 'fal fa-angle-up' : 'fal fa-angle-down' "
                    ></i>
                </a>
            </div>
        </div>

        <div class="card card-custom gutter-b" ng-if="loan.dateReleased" ng-init="showPaymentHistory = true">
            <div class="card-header align-items-center border-0">
                <h3 class="card-title align-items-start flex-column">
                    <span class="font-weight-bolder text-dark">Payment History</span>
                </h3>
                <div class="card-toolbar"></div>
            </div>
            <div class="card-body p-0">
                <div class="slide" ng-show="showPaymentHistory">
                    <div class="table-responsive">
                        <table class="table table-bordered mb-8">
                            <thead class="table-active">
                                <tr>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Payment For
                                            </span>
                                        </div>
                                    </th>

                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Principal
                                            </span>
                                        </div>
                                    </th>

                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Interest
                                            </span>
                                        </div>
                                    </th>

                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Total Payable
                                            </span>
                                        </div>
                                    </th>

                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Payment Date
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Payment Type
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Total Payment
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Check No.
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Bank Account
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Balance
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Overpayment
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Date Tendered
                                            </span>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="payment in loan.payments">
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.amortizationItem_schedule | date: 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>

                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.principal | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.interest | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.totalToPay | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>

                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.datePayment | date: 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.paymentType_name }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.total | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.checkNo}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.bankAccount }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.balance | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.overPayment | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ payment.dateCreated | date: 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-success">
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                Total
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.totalPayment | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div
                            class="d-flex justify-content-center align-items-center flex-wrap"
                            ng-if="pageRangeDocument((borrower.documents | filter: {subProcess:{id:subProcess.id}}).length).length > 1"
                        >
                            <div class="d-flex flex-wrap py-2 mr-3">
                                <button
                                    href="#"
                                    class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                    ng-disabled="currentPageDocument(subProcess) == 0"
                                    ng-click="gotoPrevDocument(subProcess)"
                                >
                                    <i class="fas fa-chevron-left icon-sm"></i>
                                </button>
                                <button
                                    href="#"
                                    class="btn btn-circle btn-icon btn-xs border-0 btn-hover-primary mr-2 my-1"
                                    ng-class="{ 'active' : n == currentPageDocument(subProcess) + 1 }"
                                    ng-repeat="n in pageRangeDocument(borrower.documents.length)"
                                    ng-click="jumpToPageDocument(n,subProcess)"
                                >
                                    <small>{{n}}</small>
                                </button>
                                <button
                                    href="#"
                                    class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                    ng-disabled="currentPageDocument(subProcess) >=borrower.documents.length/pageSizeDocument - 1"
                                    ng-click="gotoNextDocument(subProcess)"
                                >
                                    <i class="fas fa-chevron-right icon-sm"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex justify-content-center p-0">
                <a class="btn btn-icon" ng-click="showPaymentHistory = !showPaymentHistory">
                    <i
                        class="wide text-warning"
                        ng-class=" showPaymentHistory ? 'fal fa-angle-up' : 'fal fa-angle-down' "
                    ></i>
                </a>
            </div>
        </div>

        <div class="card card-custom gutter-b" ng-if="loan.dateReleased" ng-init="showAmortizationHistory = true">
            <div class="card-header align-items-center border-0">
                <h3 class="card-title align-items-start flex-column">
                    <span class="font-weight-bolder text-dark">Amortization History</span>
                </h3>
            </div>
            <div class="card-header card-header-tabs-line fade-in" ng-show="showAmortizationHistory">
                <div class="card-toolbar">
                    <ul class="nav nav-tabs nav-tabs-space-lg nav-tabs-line nav-bold nav-tabs-line-3x" role="tablist">
                        <li class="nav-item repeated-item" ng-repeat="amortization in loan.amortizations">
                            <a
                                class="nav-link"
                                data-toggle="tab"
                                role="tab"
                                ng-class="{ 'active' : amortization.id == currentAmortization.id }"
                                ng-click="loadAmortization(amortization.id)"
                            >
                                <span class="nav-icon mr-2"><i class="fad fa-calendar-week icon-lg"></i></span>
                                <span class="nav-text mr-3">{{ amortization.dateCreated | date :"mediumDate" }}</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="slide" ng-show="showAmortizationHistory">
                    <div class="table-responsive">
                        <table class="table table-bordered mb-8">
                            <thead class="table-active">
                                <tr>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                No.
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Schedule
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Days
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Principal
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Interest
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                VAT
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Total Amortization
                                            </span>
                                        </div>
                                    </th>
                                    <th>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 text-uppercase font-size-lg">
                                                Principal Balance
                                            </span>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                0
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.latestAmortization.dateReleased | date: 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.amount | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                                <tr ng-repeat="amortizationItem in currentAmortization.amortizationItems">
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{$index+1 }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortizationItem.schedule | date: 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortizationItem.days}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortizationItem.principal | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortizationItem.interest | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortizationItem.vat | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortizationItem.total | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ amortizationItem.principalBalance | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                </tr>
                                <tr class="table-success">
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                Total
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ loan.amount | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg">
                                                {{ currentAmortization.totalAmortizationInterest | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right">
                                            <span class="text-dark-75 font-weight-bolder font-size-lg"></span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="card-footer d-flex justify-content-center p-0">
                <a class="btn btn-icon" ng-click="showAmortizationHistory = !showAmortizationHistory">
                    <i
                        class="wide text-warning"
                        ng-class=" showAmortizationHistory ? 'fal fa-angle-up' : 'fal fa-angle-down' "
                    ></i>
                </a>
            </div>
        </div>
    </div>
    <div class="col-xl-5">
        <div class="card card-custom card-stretch gutter-b">
            <div class="card-header">
                <div class="card-title">
                    <span class="card-icon">
                        <i class="fad fa-users-class"></i>
                    </span>
                    <h3 class="card-label">Notes</h3>
                </div>
            </div>
            <div class="card-body" block-ui="noteBlockUI">
                <div class="container">
                    <form class="form">
                        <div class="form-group">
                            <textarea
                                class="form-control form-control-lg form-control-solid"
                                ng-model="newNote.noteDescription"
                                name="noteDescription"
                                rows="3"
                                placeholder="Type notes"
                            ></textarea>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button
                                href="#"
                                class="btn btn-light-primary font-weight-bold"
                                ng-disabled="!newNote.noteDescription"
                                ng-click="addNote(loan)"
                            >
                                <i class="fal fa-plus mr-2"></i>
                                Add Notes
                            </button>
                        </div>
                    </form>
                    <div class="separator separator-dashed my-10"></div>
                    <div class="timeline timeline-3 pb-5">
                        <div class="timeline-items">
                            <div
                                class="timeline-item"
                                ng-repeat="note in notes | orderBy:'-' | startFrom:currentPageNote*pageSizeNote | limitTo: pageSizeNote "
                            >
                                <div class="timeline-media">
                                    <i class="fad fa-sticky-note text-primary"></i>
                                </div>
                                <div class="timeline-content">
                                    <p class="p-0">
                                        {{ note.note}}
                                    </p>
                                    <small class="text-dark-75 font-weight-bold">
                                        {{ note.committeeName }}
                                    </small>
                                    <br />
                                    <small class="text-muted">{{ note.action_time | date : 'medium' }}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div
                        class="d-flex justify-content-center align-items-center flex-wrap"
                        ng-if="pageRangeNote(notes.length).length > 1"
                    >
                        <div class="d-flex flex-wrap py-2 mr-3">
                            <button
                                href="#"
                                class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                ng-disabled="currentPageNote == 0"
                                ng-click="gotoPrevNote()"
                            >
                                <i class="fas fa-chevron-left icon-sm"></i>
                            </button>
                            <button
                                href="#"
                                class="btn btn-circle btn-icon btn-xs border-0 btn-hover-primary mr-2 my-1"
                                ng-class="{ 'active' : n == currentPageNote + 1 }"
                                ng-repeat="n in pageRangeNote(notes.length)"
                                ng-click="jumpToPageNote(n)"
                            >
                                <small>{{n}}</small>
                            </button>
                            <button
                                href="#"
                                class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                ng-disabled="currentPageNote >=notes.length/pageSizeNote - 1"
                                ng-click="gotoNextNote()"
                            >
                                <i class="fas fa-chevron-right icon-sm"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-xl-3">
        <!-- <div class="row">
            <div class="col-xl-12">
                <div class="card card-custom gutter-b">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon">
                                <i class="fad fa-users-class"></i>
                            </span>
                            <h3 class="card-label">Overview</h3>
                        </div>
                        <div class="card-toolbar">
                            <div class="dropdown dropdown-inline">
                                <button
                                    type="button"
                                    class="btn btn-primary float-right"
                                    data-toggle="dropdown"
                                    aria-haspopup="true"
                                    aria-expanded="false"
                                >
                                    <i class="fal fa-cogs"></i>
                                    Actions
                                </button>
                                <div class="dropdown-menu dropdown-menu-right">
                                    <a class="dropdown-item" href="" ng-click="edit(borrower.borrowerId)">
                                        <i class="fal fa-edit mr-2"></i>
                                        Update
                                    </a>
                                    <a class="dropdown-item" href="" ng-click="delete(borrower.borrowerId)">
                                        <i class="fal fa-trash-alt mr-2"></i>
                                        Delete
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group form-group-xs row">
                            <label class="col-4 col-form-label">Code:</label>
                            <div class="col-8">
                                <span class="form-control-plaintext font-weight-bold">{{ document.documentCode }}</span>
                            </div>
                        </div>
                        <div class="form-group form-group-xs row">
                            <label class="col-4 col-form-label">Name:</label>
                            <div class="col-8">
                                <span class="form-control-plaintext font-weight-bold">{{ document.name }}</span>
                            </div>
                        </div>
                        <div class="form-group form-group-xs row">
                            <label class="col-4 col-form-label">Process:</label>
                            <div class="col-8">
                                <span class="form-control-plaintext font-weight-bold">
                                    {{document.subProcessName }}
                                </span>
                            </div>
                        </div>
                        <div class="form-group form-group-xs row">
                            <label class="col-4 col-form-label">Borrower:</label>
                            <div class="col-8">
                                <span class="form-control-plaintext font-weight-bold">
                                    <a href="" ng-click="viewBorrower(document.borrower)">
                                        {{ document.borrowerName }}
                                    </a>
                                </span>
                            </div>
                        </div>
                        <div class="form-group form-group-xs row">
                            <label class="col-4 col-form-label">Date Created:</label>
                            <div class="col-8">
                                <span class="form-control-plaintext font-weight-bold">
                                    {{ document.dateCreated | date : 'medium' }}
                                </span>
                            </div>
                        </div>
                        <div class="form-group form-group-xs row">
                            <label class="col-4 col-form-label">Description:</label>
                            <div class="col-8">
                                <span class="form-control-plaintext font-weight-bold">{{ document.description }}</span>
                            </div>
                        </div>
                        <div class="form-group form-group-xs row">
                            <label class="col-4 col-form-label">Remarks:</label>
                            <div class="col-8">
                                <span class="form-control-plaintext font-weight-bold">{{ document.remarks }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-12">
                <div class="card card-custom gutter-b">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon">
                                <i class="fad fa-users-class"></i>
                            </span>
                            <h3 class="card-label">Status</h3>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="form-group form-group-xs row">
                            <label class="col-8 col-form-label">{{document.documentMovements[0].status.name}}</label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-12">
                <div class="card card-custom gutter-b">
                    <div class="card-header">
                        <div class="card-title">
                            <span class="card-icon">
                                <i class="fad fa-users-class"></i>
                            </span>
                            <h3 class="card-label">Notes</h3>
                        </div>
                    </div>
                    <div class="card-body" block-ui="noteBlockUI">
                        <div class="container">
                            <form class="form">
                                <div class="form-group">
                                    <textarea
                                        class="form-control form-control-lg form-control-solid"
                                        ng-model="newNote.noteDescription"
                                        name="noteDescription"
                                        rows="3"
                                        placeholder="Type notes"
                                    ></textarea>
                                </div>
                                <div class="d-flex justify-content-end">
                                    <a
                                        href="#"
                                        class="btn btn-light-primary font-weight-bold"
                                        ng-disabled="!newNote.noteDescription"
                                        ng-click="addNote(document)"
                                    >
                                        <i class="fal fa-plus mr-2"></i>
                                        Add Notes
                                    </a>
                                </div>
                            </form>
                            <div class="separator separator-dashed my-10"></div>
                            <div class="timeline timeline-3 pb-5">
                                <div class="timeline-items">
                                    <div
                                        class="timeline-item"
                                        ng-repeat="note in notes | orderBy:'-' | startFrom:currentPageNote*pageSizeNote | limitTo: pageSizeNote "
                                    >
                                        <div class="timeline-media">
                                            <i class="fad fa-sticky-note text-primary"></i>
                                        </div>
                                        <div class="timeline-content">
                                            <p class="p-0">
                                                {{ note.note}}
                                            </p>
                                            <small class="text-dark-75 font-weight-bold">
                                                {{ note.committeeName }}
                                            </small>
                                            <br />
                                            <small class="text-muted">{{ note.action_time | date : 'medium' }}</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div
                                class="d-flex justify-content-center align-items-center flex-wrap"
                                ng-if="pageRangeNote(notes.length).length > 1"
                            >
                                <div class="d-flex flex-wrap py-2 mr-3">
                                    <button
                                        href="#"
                                        class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                        ng-disabled="currentPageNote == 0"
                                        ng-click="gotoPrevNote()"
                                    >
                                        <i class="fas fa-chevron-left icon-sm"></i>
                                    </button>
                                    <button
                                        href="#"
                                        class="btn btn-circle btn-icon btn-xs border-0 btn-hover-primary mr-2 my-1"
                                        ng-class="{ 'active' : n == currentPageNote + 1 }"
                                        ng-repeat="n in pageRangeNote(notes.length)"
                                        ng-click="jumpToPageNote(n)"
                                    >
                                        <small>{{n}}</small>
                                    </button>
                                    <button
                                        href="#"
                                        class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                        ng-disabled="currentPageNote >=notes.length/pageSizeNote - 1"
                                        ng-click="gotoNextNote()"
                                    >
                                        <i class="fas fa-chevron-right icon-sm"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </div>

    <div class="col-xl-9">
        <!-- <div class="card card-custom gutter-b">
            <div class="card-header">
                <div class="card-title">
                    <span class="card-icon">
                        <i class="fad fa-users-class"></i>
                    </span>
                    <h3 class="card-label">Loan</h3>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-xl-6">
                        <h4 class="mb-0">{{ document.loan.amount }}</h4>
                        <p>Loan Amount</p>
                        <h4 class="mb-0">{{ document.loan.interestRate }}</h4>
                        <p>Interest Rate</p>
                        <h4 class="mb-0">{{ document.loan.term_name }}</h4>
                        <p>Term</p>
                        <h4 class="mb-0">{{ document.loan.purpose }}</h4>
                        <p>Purpose</p>
                        <h4 class="mb-0">{{ document.loan.security }}</h4>
                        <p>Security</p>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- <div class="card card-custom gutter-b">
            <div class="card-header align-items-center border-0 mt-4">
                <h3 class="card-title align-items-start flex-column">
                    <span class="font-weight-bolder text-dark">Activities</span>
                </h3>
            </div>
            <div class="card-body pt-4">
                <div class="timeline timeline-6 mt-3">
                    <div
                        class="timeline-item align-items-start"
                        ng-repeat="documentMovement in documentMovements | orderBy:'-'"
                    >
                        <div class="timeline-label font-weight-bolder text-dark-75 font-size-lg text-right pr-3">
                            {{ documentMovement.dateCreated | date : 'medium' }}
                        </div>
                        <div class="timeline-badge">
                            <i class="fal fa-genderless text-success icon-xxl"></i>
                        </div>
                        <div class="timeline-content text-dark-50">
                            <div class="d-flex mb-3">
                                <h6 class="text-dark-75 text-hover-primary font-weight-bold">
                                    {{ documentMovement.name }}
                                    <span ng-if="documentMovement.outputName">-</span>
                                    {{ documentMovement.outputName }}
                                </h6>
                                <span class="label label-light-info font-weight-bolder label-inline ml-2">
                                    {{ documentMovement.statusName }}
                                </span>
                            </div>
                            <p class="p-0 font-size-h6">
                                {{ documentMovement.description }}
                            </p>
                            <p class="p-0">
                                <i class="font-size-sm">Commitee: {{ documentMovement.committeeName }}</i>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- <div class="card card-custom gutter-b">
            <div class="card-header">
                <div class="card-toolbar">
                    <ul class="nav nav-tabs nav-tabs-space-lg nav-tabs-line nav-tabs-bold nav-tabs-line-3x nav-tabs-line-brand" role="tablist">
                        <li class="nav-item" ng-repeat="activityTemplate in activityTemplates">
                            <a class="nav-link" data-toggle="tab" role="tab" ng-class="{ 'active' : activityTemplate.templateNumber == currentActivityTemplate }"  ng-click="goToActivityTemplate(activityTemplate.templateNumber)" >
                                <span class="nav-icon"><i class="{{ activityTemplate.icon }}"></i></span>
                                <span class="nav-text">{{ activityTemplate.name }}</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="tab-content pt-3">
                    <div class="card card-custom" ng-controller="DocumentListController">
                        <table class="table table-light table-borderless" ng-table="tableDocumentMovements">
                            <tr ng-repeat="documentmovement in $data | filter : {  documentId : document.id }" align="center">
                                <td data-title="'Activity'" style="width: 28%">
                                    {{ documentmovement.name }} - {{ documentmovement.outputName }}
                                </td>
                                <td data-title="'Committee'" style="width: 18%">
                                    {{ documentmovement.committeeName }}
                                </td>
                                <td data-title="'Status'" style="width: 18%">
                                    {{ documentmovement.statusName }}
                                </td>
                                <td data-title="'Description'" style="width: 18%">
                                    {{ documentmovement.description }}
                                </td>
                                <td data-title="'Date'" style="width: 18%">
                                    {{ documentmovement.dateCreated }}
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- <div class="card card-custom gutter-b" ng-if="currentStep">
            <div class="card-header">
                <div class="card-title">
                    <span class="card-icon">
                        <i class="fad fa-users-class"></i>
                    </span>
                    <h3 class="card-label">Procedure</h3>
                </div>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-xl-6">
                        <h4 class="mb-0">{{ currentStep.order }}. {{ currentStep.name }}</h4>
                        <p>Current Step</p>
                        <h4 class="mb-0">
                            <span ng-repeat="position in currentStep.position">
                                {{$first ? '' : $last ? ' and ' : ', '}}{{ position.name}}
                            </span>
                        </h4>
                        <p>Assigned Committee</p>
                        <h6 class="mb-0">{{ currentStep.description}}</h6>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- <div class="card card-custom gutter-b">
            <div class="card-header">
                <div class="card-title">
                    <span class="card-icon">
                        <i class="fad fa-users-class"></i>
                    </span>
                    <h3 class="card-label">Requirements</h3>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="vertical-wizard">
                    <div class="wizard-nav border-right py-8 px-8 py-lg-12 px-lg-8">
                        <div class="wizard-steps">
                            <div
                                class="wizard-step"
                                ng-class="{'active':processRequirement.id === currentRequirement.id }"
                                ng-repeat="processRequirement in processRequirements"
                                ng-click="goToRequirement(processRequirement.id)"
                            >
                                <div class="wizard-wrapper">
                                    <div class="wizard-icon">
                                        <i class="fad fa-file-plus"></i>
                                    </div>
                                    <div class="wizard-label">
                                        <h3 class="wizard-title">
                                            {{ processRequirement.name }}
                                        </h3>
                                        <div class="wizard-desc">
                                            {{ processRequirement.isRequiredText }}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="wizard-body py-8 px-8 py-lg-12 px-lg-8" block-ui="attachmentBlockUI">
                        <div class="row">
                            <div class="offset-xxl-2 col-xxl-8">
                                <div class="pb-5">
                                    <div class="pb-5">
                                        <div class="font-size-h6">
                                            {{ currentRequirement.name }}
                                            <span class="text-muted pt-2 font-size-sm d-block">
                                                {{ currentRequirement.description }}
                                            </span>
                                        </div>
                                    </div>
                                    <ul class="text-dark list-unstyled">
                                        <li class="font-size-h6">Attachments</li>
                                        <ul class="font-size-h7">
                                            <li
                                                ng-repeat="stepRequirementAttachment in currentRequirement.attachments | startFrom:currentPageAttachment*pageSizeAttachment | limitTo: pageSizeAttachment "
                                            >
                                                <a
                                                    href=""
                                                    ng-click="downloadFile(stepRequirementAttachment.fileAttachment,stepRequirementAttachment.fileName)"
                                                >
                                                    {{ stepRequirementAttachment.fileName | trimStringWithExtension: 20
                                                    }} -
                                                    <span
                                                        ng-if="stepRequirementAttachment.description"
                                                        ng-bind="stepRequirementAttachment.description"
                                                    ></span>
                                                </a>
                                            </li>
                                        </ul>
                                    </ul>
                                    <div
                                        class="d-flex justify-content-center align-items-center flex-wrap"
                                        ng-if="pageRangeAttachment(currentRequirement.attachments.length).length > 1"
                                    >
                                        <div class="d-flex flex-wrap py-2 mr-3">
                                            <button
                                                href="#"
                                                class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                                ng-disabled="currentPageAttachment == 0"
                                                ng-click="gotoPrevAttachment()"
                                            >
                                                <i class="fas fa-chevron-left icon-sm"></i>
                                            </button>
                                            <button
                                                href="#"
                                                class="btn btn-circle btn-icon btn-xs border-0 btn-hover-primary mr-2 my-1"
                                                ng-class="{ 'active' : n == currentPageAttachment + 1 }"
                                                ng-repeat="n in pageRangeAttachment(currentRequirement.attachments.length)"
                                                ng-click="jumpToPageAttachment(n)"
                                            >
                                                <small>{{n}}</small>
                                            </button>
                                            <button
                                                href="#"
                                                class="btn btn-circle btn-icon btn-xs btn-light-primary mr-2 my-1"
                                                ng-disabled="currentPageAttachment >=currentRequirement.attachments.length/pageSizeAttachment - 1"
                                                ng-click="gotoNextAttachment()"
                                            >
                                                <i class="fas fa-chevron-right icon-sm"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                                <div class="pb-5">
                                    <div class="form-group">
                                        <label>File Attachment</label>
                                        <input
                                            type="file"
                                            id="fileAttachment"
                                            name="fileAttachment"
                                            multiple
                                            select-ng-files="fileAttachment"
                                            ng-model="fileAttachment.attachment"
                                            hidden
                                        />
                                        <div class="dropzone dropzone-multi">
                                            <div class="dropzone-panel mb-lg-0 mb-2">
                                                <a
                                                    class="dropzone-select btn btn-light-primary font-weight-bold btn-sm"
                                                    ng-click="selectFile()"
                                                >
                                                    Select files
                                                </a>
                                                <a
                                                    class="dropzone-remove-all btn btn-light-primary font-weight-bold btn-sm"
                                                >
                                                    Remove All
                                                </a>
                                            </div>
                                            <div class="dropzone-items">
                                                <div class="dropzone-item" ng-repeat="file in fileList">
                                                    <div class="dropzone-file">
                                                        <div class="dropzone-filename">
                                                            <span>{{ file.name }}</span>
                                                            <strong>
                                                                <span>({{ file.size/1000 | number : 2 }} KB)</span>
                                                            </strong>
                                                        </div>
                                                        <div class="dropzone-error" data-dz-errormessage></div>
                                                    </div>
                                                    <div class="dropzone-toolbar">
                                                        <span
                                                            class="dropzone-delete"
                                                            data-dz-remove
                                                            ng-click="removeFile($index)"
                                                        >
                                                            <i class="fal fa-times icon-md"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label>Description *</label>
                                        <textarea
                                            ng-model="newAttachment.attachmentDescription"
                                            name="attachmentDescription"
                                            type="text"
                                            rows="4"
                                            cols="50"
                                            class="form-control form-control-solid form-control-lg textarea"
                                        ></textarea>
                                        <span class="form-text text-muted">Please enter attachment description.</span>
                                    </div>
                                </div>
                                <div class="d-flex justify-content-end border-top mt-5 pt-10">
                                    <button
                                        class="btn btn-outline-primary ont-weight-bold text-uppercase"
                                        type="button"
                                        ng-disabled="fileList.length == 0 || !newAttachment.attachmentDescription"
                                        ng-click="attachFile(currentRequirement)"
                                    >
                                        <i class="fal fa-plus mr-2"></i>
                                        Attach
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
        <!-- <div class="card card-custom gutter-b">
            <div class="card-header">
                <div class="card-title">
                    <span class="card-icon">
                        <i class="fad fa-users-class"></i>
                    </span>
                    <h3 class="card-label">Actions</h3>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="vertical-wizard">
                    <div class="wizard-nav border-right py-8 px-8 py-lg-12 px-lg-8">
                        <ul class="text-dark list-unstyled">
                            <li class="font-size-h6">Summary</li>
                            <ul class="font-size-h7">
                                <li>Added attachment file to requirement 1.</li>
                            </ul>
                        </ul>
                    </div>
                    <div class="wizard-body py-8 px-8 py-lg-12 px-lg-8">
                        <div class="row">
                            <div class="offset-xxl-2 col-xxl-8">
                                <form class="form" id="kt_form">
                                    <div class="pb-5">
                                        <div class="form-group">
                                            <label>Final Remarks</label>
                                            <textarea
                                                ng-model="remarks"
                                                name="remarks"
                                                type="text"
                                                rows="4"
                                                cols="50"
                                                class="form-control form-control-solid form-control-lg textarea"
                                            ></textarea>
                                            <span class="form-text text-muted">Please enter your final Remarks.</span>
                                        </div>
                                    </div>
                                    <div class="d-flex justify-content-end border-top mt-5 pt-10">
                                        <div>
                                            <span ng-repeat="output in currentStep.outputs">
                                                <button
                                                    type="button"
                                                    class="btn btn-success font-weight-bold text-uppercase px-9 py-4"
                                                    ng-click="takeActions(document.id,output,currentStep)"
                                                >
                                                    {{output.name}}
                                                </button>
                                            </span>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div> -->
    </div>
    <!-- <div class="card card-custom gutter-b">
            <div class="card-header">
                <div class="card-toolbar">
                    <ul class="nav nav-tabs nav-tabs-space-lg nav-tabs-line nav-tabs-bold nav-tabs-line-3x nav-tabs-line-brand" role="tablist">
                        <li class="nav-item" ng-repeat="template in templates">
                            <a class="nav-link" data-toggle="tab" role="tab" ng-class="{ 'active' : template.templateNumber == currentTemplate }" ng-click="goToTemplate(template.templateNumber)">
                                <span class="nav-icon"><i class="{{ template.icon }}"></i></span>
                                <span class="nav-text">{{ template.name }}</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="tab-content pt-3">
                    <ng-include src="getTemplate()"></ng-include>                    
                </div>
            </div>
        </div> -->
</div>
