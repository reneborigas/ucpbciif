<div class="row" ng-controller="BorrowerNewLoanApplicationController">
    <div class="col-xl-3">
        <div class="card card-custom gutter-b">
            <div class="card-header">
                <div class="card-title">
                    <span class="card-icon">
                        <i class="fad fa-users-class"></i>
                    </span>
                    <h3 class="card-label">Overview</h3>
                </div>
            </div>
            <div class="card-body">
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">Name:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">{{ borrower.borrowerName }}</span>
                    </div>
                </div>
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">TIN #:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">{{ borrower.borrowerTIN }}</span>
                    </div>
                </div>
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">Address:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">{{ borrower.borrowerAddress}}</span>
                    </div>
                </div>
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">Borrower Type:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">{{ borrower.borrowerType }}</span>
                    </div>
                </div>
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">Phone:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">{{ borrower.borrowerPhone }}</span>
                    </div>
                </div>
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">Email:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">
                            <span class="form-control-plaintext font-weight-bold">{{ borrower.borrowerEmailAddress }}</span>
                        </span>
                    </div>
                </div>
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">Description:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">{{ borrower.description }}</span>
                    </div>
                </div>
                <div class="form-group form-group-xs row">
                    <label class="col-4 col-form-label">Remarks:</label>
                    <div class="col-8">
                        <span class="form-control-plaintext font-weight-bold">{{ borrower.remarks }}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xl-9">
        <div class="card card-custom gutter-b" ng-if="subProcess.parentLastDocumentCreditLine">
            <div class="card-header">
                <div class="card-title">
                    <h3 class="card-label">
                        Credit Line Details
                        <span class="text-muted pt-2 font-size-sm d-block"></span>
                    </h3>
                </div>
                <div class="card-toolbar">
                    <button
                        class="btn btn-sm btn-light-success font-weight-bolder text-uppercase"
                        ng-click="showCreditLineList()"
                        ng-if="borrowerCreditLineList.length > 0"
                    >
                        Change Credit Line Assignment
                    </button>
                </div>
            </div>
            <div class="card-body">
                <div class="d-flex">
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center flex-wrap">
                            <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                                <span class="mr-4">
                                    <i class="fad fa-calendar-week icon-2x text-muted font-weight-bold"></i>
                                </span>
                                <div class="d-flex flex-column text-dark-75">
                                    <span class="font-weight-bolder font-size-sm">Program</span>
                                    <span class="font-weight-bolder font-size-h5">{{ creditLine.loanProgram_name }}</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                                <span class="mr-4">
                                    <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                                </span>
                                <div class="d-flex flex-column text-dark-75">
                                    <span class="font-weight-bolder font-size-sm">Credit Line Amount</span>
                                    <span class="font-weight-bolder font-size-h5">{{ creditLine.amount | currency :'₱'}}</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                                <span class="mr-4">
                                    <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                                </span>
                                <div class="d-flex flex-column text-dark-75">
                                    <span class="font-weight-bolder font-size-sm">Total Availment</span>
                                    <span class="font-weight-bolder font-size-h5">{{ creditLine.totalAvailment | currency :'₱'}}</span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                                <span class="mr-4">
                                    <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                                </span>
                                <div class="d-flex flex-column text-dark-75">
                                    <span class="font-weight-bolder font-size-sm">Remaining Credit Line Amount</span>
                                    <span class="font-weight-bolder font-size-h5">{{ creditLine.remainingCreditLine | currency :'₱'}}</span>
                                </div>
                            </div>

                            <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                                <span class="mr-4">
                                    <i class="fad fa-percentage icon-2x text-muted font-weight-bold"></i>
                                </span>
                                <div class="d-flex flex-column text-dark-75">
                                    <span class="font-weight-bolder font-size-sm">Interest Rate</span>
                                    <span class="font-weight-bolder font-size-h5">
                                        {{ creditLine.interestRate_amount }}
                                        <span>%</span>
                                    </span>
                                </div>
                            </div>
                            <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                                <span class="mr-4">
                                    <i class="fad fa-calendar-week icon-2x text-muted font-weight-bold"></i>
                                </span>
                                <div class="d-flex flex-column text-dark-75">
                                    <span class="font-weight-bolder font-size-sm">Term</span>
                                    <span class="font-weight-bolder font-size-h5">{{ creditLine.term_name }}</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card card-custom gutter-b" ng-if="subProcess.parentLastDocumentLoan">
            <div class="card-body">
                <div class="d-flex">
                    <div class="flex-grow-1">
                        <div class="d-flex align-items-center justify-content-between flex-wrap">
                            <div class="mr-3">
                                <div class="d-flex flex-wrap my-2">
                                    <span class="text-muted font-weight-bold mr-2">Loan Details</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="separator separator-solid my-7"></div>
                <div class="d-flex align-items-center flex-wrap">
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-calendar-week icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">PN No./Loan No.</span>
                            <span class="font-weight-bolder font-size-h5">{{ loan.pnNo }}</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-calendar-week icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Program</span>
                            <span class="font-weight-bolder font-size-h5">{{ loan.loanProgram_name }}</span>
                        </div>
                    </div>

                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-coins icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Loan</span>
                            <span class="font-weight-bolder font-size-h5">{{ loan.amount | currency :'₱'}}</span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-percentage icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Interest Rate</span>
                            <span class="font-weight-bolder font-size-h5">
                                {{ loan.interestRate_amount }}
                                <span>%</span>
                            </span>
                        </div>
                    </div>
                    <div class="d-flex align-items-center flex-lg-fill mr-5 my-1">
                        <span class="mr-4">
                            <i class="fad fa-calendar-week icon-2x text-muted font-weight-bold"></i>
                        </span>
                        <div class="d-flex flex-column text-dark-75">
                            <span class="font-weight-bolder font-size-sm">Term</span>
                            <span class="font-weight-bolder font-size-h5">{{ loan.term_name }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="card card-custom gutter-b" ng-show="!subProcess.parentLastDocumentCreditLine">
            <div class="card-header">
                <div class="card-title">
                    <h3 class="card-label">
                        Credit Line Details
                        <span class="text-muted pt-2 font-size-sm d-block"></span>
                    </h3>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="row justify-content-center p-5">
                    <div class="col" ng-switch="step">
                        <form class="form mt-0" name="form.newCreditLineDetailsForm">
                            <div class="pb-2">
                                <div class="form-group row">
                                    <label for="loanProgram" class="col-xl-3 col-lg-3 col-form-label text-right">Program</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <select
                                            class="form-control"
                                            id="loanProgram"
                                            name="loanProgram"
                                            ng-model="creditLine.loanProgram"
                                            ng-options="loanProgram.id as (loanProgram.name) for loanProgram in loanPrograms"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.loanProgram.$invalid &&
                                            form.newCreditLineDetailsForm.loanProgram.$touched, 'is-valid' : form.newCreditLineDetailsForm.loanProgram.$valid && form.newCreditLineDetailsForm.loanProgram.$touched }"
                                            required
                                        ></select>
                                        <span
                                            class="form-text text-muted fade"
                                            ng-show="form.newCreditLineDetailsForm.loanProgram.$touched && form.newCreditLineDetailsForm.loanProgram.$invalid"
                                        >
                                            Please select program.
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Amount</label>
                                    <div class="col-lg-3 col-xl-6">
                                        <input
                                            type="text"
                                            min="0"
                                            class="form-control"
                                            id="amount"
                                            name="amount"
                                            placeholder="0"
                                            ng-model="creditLine.amount"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.amount.$invalid && form.newCreditLineDetailsForm.amount.$touched && creditLine.amount <=0, 'is-valid' : form.newCreditLineDetailsForm.amount.$valid && form.newCreditLineDetailsForm.amount.$touched }"
                                            required
                                            price
                                        />
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newCreditLineDetailsForm.amount.$touched && form.newCreditLineDetailsForm.amount.$invalid"
                                        >
                                            Please enter amount.
                                        </span>
                                    </div>
                                </div>

                                <!-- <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Interest Rate</label>
                                    <div class="col-lg-3 col-xl-6">
                                        <input
                                            type="number"
                                            min="0"
                                            max="100"
                                            step="0.01"
                                            class="form-control"
                                            id="interestRate"
                                            name="interestRate"
                                            ng-model="creditLine.interestRate"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.interestRate.$invalid && form.newCreditLineDetailsForm.interestRate.$touched, 'is-valid' : form.newCreditLineDetailsForm.interestRate.$valid && form.newCreditLineDetailsForm.interestRate.$touched }"
                                            required
                                        />
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newCreditLineDetailsForm.interestRate.$touched && form.newCreditLineDetailsForm.interestRate.$invalid"
                                        >
                                            Please enter interest rate.
                                        </span>
                                    </div>
                                </div> -->

                                <div class="form-group row">
                                    <label for="interestRate" class="col-xl-3 col-lg-3 col-form-label text-right">Interest Rate</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <select
                                            class="form-control"
                                            id="interestRate"
                                            name="interestRate"
                                            ng-model="creditLine.interestRate"
                                            ng-options="interestRate.id as (interestRate.interestRate) for interestRate in interestRates"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.interestRate.$invalid &&
                                            form.newCreditLineDetailsForm.interestRate.$touched, 'is-valid' : form.newCreditLineDetailsForm.interestRate.$valid && form.newCreditLineDetailsForm.interestRate.$touched }"
                                            required
                                        ></select>
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newCreditLineDetailsForm.interestRate.$touched && form.newCreditLineDetailsForm.interestRate.$invalid"
                                        >
                                            Please select interest rate.
                                        </span>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label for="term" class="col-xl-3 col-lg-3 col-form-label text-right">Term</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <select
                                            class="form-control"
                                            id="term"
                                            name="term"
                                            ng-model="creditLine.term"
                                            ng-options="term.id as (term.name) for term in terms"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.term.$invalid &&
                                            form.newCreditLineDetailsForm.term.$touched, 'is-valid' : form.newCreditLineDetailsForm.term.$valid && form.newCreditLineDetailsForm.term.$touched }"
                                            required
                                        ></select>
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newCreditLineDetailsForm.term.$touched && form.newCreditLineDetailsForm.term.$invalid"
                                        >
                                            Please select term.
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Purpose</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <textarea
                                            type="text"
                                            id="newCreditLineDetailsPurpose"
                                            name="newCreditLineDetailsPurpose"
                                            rows="4"
                                            cols="50"
                                            placeholder="Enter purpose"
                                            class="form-control textarea"
                                            ng-model="creditLine.purpose"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.newCreditLineDetailsPurpose.$invalid &&
                                            form.newCreditLineDetailsForm.newCreditLineDetailsPurpose.$touched, 'is-valid' : form.newCreditLineDetailsForm.newCreditLineDetailsPurpose.$valid && form.newCreditLineDetailsForm.newCreditLineDetailsPurpose.$touched }"
                                            required
                                        ></textarea>
                                        <span
                                            class="form-text text-muted fade"
                                            ng-show="form.newCreditLineDetailsForm.newCreditLineDetailsPurpose.$touched && form.newCreditLineDetailsForm.newCreditLineDetailsPurpose.$invalid"
                                        >
                                            Please select purpose.
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Security</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <textarea
                                            type="text"
                                            id="newCreditLineDetailsSecurity"
                                            name="newCreditLineDetailsSecurity"
                                            rows="4"
                                            cols="50"
                                            placeholder="Enter security"
                                            class="form-control textarea"
                                            ng-model="creditLine.security"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.newCreditLineDetailsSecurity.$invalid &&
                                            form.newCreditLineDetailsForm.newCreditLineDetailsSecurity.$touched, 'is-valid' : form.newCreditLineDetailsForm.newCreditLineDetailsSecurity.$valid && form.newCreditLineDetailsForm.newCreditLineDetailsSecurity.$touched }"
                                            required
                                        ></textarea>
                                        <span
                                            class="form-text text-muted fade"
                                            ng-show="form.newCreditLineDetailsForm.newCreditLineDetailsSecurity.$touched && form.newCreditLineDetailsForm.newCreditLineDetailsSecurity.$invalid"
                                        >
                                            Please input security.
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Approval Date</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <input
                                            type="date"
                                            id="newCreditLineDetailsDateApproved"
                                            name="newCreditLineDetailsDateApproved"
                                            class="form-control"
                                            ng-model="creditLine.dateApproved"
                                            ng-class="{'is-invalid' : form.newCreditLineDetailsForm.newCreditLineDetailsDateApproved.$invalid &&
                                        form.newCreditLineDetailsForm.newCreditLineDetailsDateApproved.$touched, 'is-valid' : form.newCreditLineDetailsForm.newCreditLineDetailsDateApproved.$valid && form.newCreditLineDetailsForm.newCreditLineDetailsDateApproved.$touched }"
                                        />

                                        <!-- <span
                                            class="form-text text-muted fade"
                                            ng-show="form.newCreditLineDetailsForm.newCreditLineDetailsDateApproved.$touched && form.newCreditLineDetailsForm.newCreditLineDetailsDateApproved.$invalid"
                                        > -->
                                        <!-- Please input date approved.
                                        </span> -->
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="card card-custom gutter-b" ng-show="(!subProcess.parentLastDocumentLoan&&subProcess.parentLastDocumentCreditLine)">
            <div class="card-header">
                <div class="card-title">
                    <h3 class="card-label">
                        Loan Details
                        <span class="text-muted pt-2 font-size-sm d-block"></span>
                    </h3>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="row justify-content-center p-5">
                    <div class="col" ng-switch="step">
                        <form class="form mt-0" name="form.newLoanDetailsForm">
                            <div class="pb-2">
                                <!-- <div class="form-group row">
                                    <label for="loanProgram" class="col-xl-3 col-lg-3 col-form-label text-right">
                                        Program
                                    </label>
                                    <div class="col-lg-9 col-xl-6">
                                        <select
                                            class="form-control"
                                            id="loanProgram"
                                            name="loanProgram"
                                            ng-model="loan.loanProgram"
                                            ng-options="loanProgram.id as (loanProgram.name) for loanProgram in loanPrograms"
                                            ng-class="{'is-invalid' : form.newLoanDetailsForm.loanProgram.$invalid &&
                                                form.newLoanDetailsForm.loanProgram.$touched, 'is-valid' : form.newLoanDetailsForm.loanProgram.$valid && form.newLoanDetailsForm.loanProgram.$touched }"
                                            required
                                        ></select>
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newLoanDetailsForm.loanProgram.$touched && form.newLoanDetailsForm.loanProgram.$invalid"
                                        >
                                            Please select program.
                                        </span>
                                    </div>
                                </div> -->
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">PN No./Loan No.</label>
                                    <div class="col-lg-3 col-xl-6">
                                        <input
                                            type="text"
                                            class="form-control"
                                            id="pnNo"
                                            name="pnNo"
                                            placeholder="0000"
                                            ng-model="loan.pnNo"
                                            ng-class="{'is-invalid' : form.newLoanDetailsForm.pnNo.$invalid && form.newLoanDetailsForm.pnNo.$touched && loan.amount <=0, 'is-valid' : form.newLoanDetailsForm.pnNo.$valid && form.newLoanDetailsForm.pnNo.$touched }"
                                            required
                                        />
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newLoanDetailsForm.pnNo.$touched && form.newLoanDetailsForm.pnNo.$invalid"
                                        >
                                            Please enter PN No./Loan No..
                                        </span>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Amount</label>
                                    <div class="col-lg-3 col-xl-6">
                                        <input
                                            type="text"
                                            min="0"
                                            class="form-control"
                                            id="loanAmount"
                                            name="loanAmount"
                                            placeholder="0"
                                            ng-model="loan.amount"
                                            ng-class="{'is-invalid' : form.newLoanDetailsForm.loanAmount.$invalid && form.newLoanDetailsForm.loanAmount.$touched || exceeded || loan.amount < 0 , 'is-valid' : form.newLoanDetailsForm.loanAmount.$valid && form.newLoanDetailsForm.loanAmount.$touched && !exceeded }"
                                            required
                                            price
                                        />
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newLoanDetailsForm.loanAmount.$touched && form.newLoanDetailsForm.loanAmount.$invalid"
                                        >
                                            Please enter amount.
                                        </span>

                                        <span class="form-text text-muted" ng-show="exceeded">Amount exceeds remaining credit loan amount.</span>
                                    </div>
                                </div>

                                <!-- <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Interest Rate</label>
                                    <div class="col-lg-3 col-xl-6">
                                        <input
                                            type="number"
                                            min="0"
                                            max="100"
                                            step="0.01"
                                            class="form-control"
                                            id="interestRate"
                                            name="interestRate"
                                            ng-model="loan.interestRate"
                                            ng-class="{'is-invalid' : form.newLoanDetailsForm.interestRate.$invalid && form.newLoanDetailsForm.interestRate.$touched, 'is-valid' : form.newLoanDetailsForm.interestRate.$valid && form.newLoanDetailsForm.interestRate.$touched }"
                                            required
                                        />
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newLoanDetailsForm.interestRate.$touched && form.newLoanDetailsForm.interestRate.$invalid"
                                        >
                                            Please enter interest rate.
                                        </span>
                                    </div>
                                </div> -->
                                <!-- 
                                <div class="form-group row">
                                    <label for="" class="col-xl-3 col-lg-3 col-form-label text-right">
                                        Term
                                    </label>
                                    <div class="col-lg-9 col-xl-6">
                                        <select
                                            class="form-control"
                                            id="term"
                                            name="term"
                                            ng-model="loan.term"
                                            ng-options="term.id as (term.name) for term in terms"
                                            ng-class="{'is-invalid' : form.newLoanDetailsForm.term.$invalid &&
                                            form.newLoanDetailsForm.term.$touched, 'is-valid' : form.newLoanDetailsForm.term.$valid && form.newLoanDetailsForm.term.$touched }"
                                            required
                                        ></select>
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newLoanDetailsForm.term.$touched && form.newLoanDetailsForm.term.$invalid"
                                        >
                                            Please select term.
                                        </span>
                                    </div>
                                </div> -->
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Purpose</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <textarea
                                            type="text"
                                            id="newLoanDetailsPurpose"
                                            name="newLoanDetailsPurpose"
                                            rows="4"
                                            cols="50"
                                            placeholder="Enter purpose"
                                            class="form-control textarea"
                                            ng-model="loan.purpose"
                                            ng-class="{'is-invalid' : form.newLoanDetailsForm.newLoanDetailsPurpose.$invalid &&
                                            form.newLoanDetailsForm.newLoanDetailsPurpose.$touched, 'is-valid' : form.newLoanDetailsForm.newLoanDetailsPurpose.$valid && form.newLoanDetailsForm.newLoanDetailsPurpose.$touched }"
                                            required
                                        ></textarea>
                                        <span
                                            class="form-text text-muted fade"
                                            ng-show="form.newLoanDetailsForm.newLoanDetailsPurpose.$touched && form.newLoanDetailsForm.newLoanDetailsPurpose.$invalid"
                                        >
                                            Please select purpose.
                                        </span>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Security</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <textarea
                                            type="text"
                                            id="newLoanDetailsSecurity"
                                            name="newLoanDetailsSecurity"
                                            rows="4"
                                            cols="50"
                                            placeholder="Enter Security"
                                            class="form-control textarea"
                                            ng-model="loan.security"
                                            ng-class="{'is-invalid' : form.newLoanDetailsForm.newLoanDetailsSecurity.$invalid &&
                                            form.newLoanDetailsForm.newLoanDetailsSecurity.$touched, 'is-valid' : form.newLoanDetailsForm.newLoanDetailsSecurity.$valid && form.newLoanDetailsForm.newLoanDetailsSecurity.$touched }"
                                            required
                                        ></textarea>
                                        <span
                                            class="form-text text-muted fade"
                                            ng-show="form.newLoanDetailsForm.newLoanDetailsSecurity.$touched && form.newLoanDetailsForm.newLoanDetailsSecurity.$invalid"
                                        >
                                            Please input security.
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <div class="card card-custom gutter-b">
            <div class="card-header">
                <div class="card-title">
                    <h3 class="card-label">
                        Create New {{subProcess.name}} File
                        <span class="text-muted pt-2 font-size-sm d-block">Create New {{subProcess.name}} File</span>
                    </h3>
                </div>
            </div>
            <div class="card-body p-0">
                <div class="row justify-content-center p-5">
                    <div class="col" ng-switch="step">
                        <form class="form mt-0" name="form.newLoanApplicationForm">
                            <div class="pb-2">
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">File Name</label>

                                    <div class="col-lg-3 col-xl-6">
                                        <span class="form-control-plaintext font-weight-bold">{{document.name}}</span>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Process</label>
                                    <div class="col-lg-3 col-xl-6">
                                        <span class="form-control-plaintext font-weight-bold">{{subProcess.name}}</span>
                                    </div>
                                </div>

                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Description</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <textarea
                                            type="text"
                                            rows="4"
                                            cols="50"
                                            id="description"
                                            name="description"
                                            placeholder="Enter Description"
                                            class="form-control textarea"
                                            ng-model="document.description"
                                        ></textarea>
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <label class="col-xl-3 col-lg-3 col-form-label text-right">Remarks</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <input
                                            type="textarea"
                                            class="form-control"
                                            id="remarks"
                                            name="remarks"
                                            ng-model="document.remarks"
                                            placeholder="Remarks"
                                        />
                                    </div>
                                </div>
                                <!-- <div class="form-group row">
                                    <label for="committee" class="col-xl-3 col-lg-3 col-form-label text-right">Committee</label>
                                    <div class="col-lg-9 col-xl-6">
                                        <select
                                            class="form-control"
                                            id="committee"
                                            name="committee"
                                            ng-model="document.committee"
                                            ng-options="committee.id as committee.committeeName for committee in committees"
                                            ng-class="{'is-invalid' : form.newLoanApplicationForm.committee.$invalid &&
                                            form.newLoanApplicationForm.committee.$touched, 'is-valid' : form.newLoanApplicationForm.committee.$valid && form.newLoanApplicationForm.committee.$touched }"
                                            required
                                        ></select>
                                        <span
                                            class="form-text text-muted"
                                            ng-show="form.newLoanApplicationForm.committee.$touched && form.newLoanApplicationForm.committee.$invalid"
                                        >
                                            Please select Committee.
                                        </span>
                                    </div>
                                </div> -->
                            </div>
                            <div class="d-flex justify-content-between border-top mt-5 pt-5">
                                <div class="mr-2">
                                    <button class="btn btn-light-primary text-uppercase p-2 pl-3 pr-3" ng-click="cancel(borrower.borrowerId)">
                                        Cancel
                                    </button>
                                </div>
                                <div>
                                    <button
                                        class="btn btn-success text-uppercase p-2 pl-3 pr-3"
                                        ng-click="save()"
                                        ng-disabled="exceeded || checkForm(subProcess.name) "
                                    >
                                        Submit
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div
        id="credit-line-list"
        class="modal fade"
        data-backdrop="static"
        tabindex="-1"
        role="dialog"
        aria-labelledby="staticBackdrop"
        aria-hidden="true"
    >
        <div class="modal-dialog modal-dialog-centered modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Credit Line List</h4>
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                </div>
                <div class="modal-body" block-ui="amortizationSchedulePaymentBlockUI">
                    <div class="table-responsive">
                        <table class="table table-align-middle table-bordered">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th class="align-middle">
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-sm">Date Approved</span>
                                        </div>
                                    </th>
                                    <th class="align-middle">
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-sm">Program</span>
                                        </div>
                                    </th>
                                    <th class="align-middle">
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-sm">Amount</span>
                                        </div>
                                    </th>
                                    <th class="align-middle">
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-sm">Total Availment</span>
                                        </div>
                                    </th>
                                    <th class="align-middle">
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-sm">Remaining Amount</span>
                                        </div>
                                    </th>
                                    <th class="align-middle">
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-sm">Interest</span>
                                        </div>
                                    </th>
                                    <th class="align-middle">
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 text-uppercase font-size-sm">Term</span>
                                        </div>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="creditLine in borrowerCreditLineList">
                                    <td>
                                        <div class="text-center px-2">
                                            <input type="radio" ng-value="creditLine.id" ng-model="selectedCreditLine.id" />
                                            <span></span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bold font-size-sm">
                                                {{ creditLine.dateApproved | date : 'mediumDate' }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bold font-size-sm">{{ creditLine.loanProgram_name }}</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bold font-size-sm">{{ creditLine.amount | currency :'₱' }}</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bold font-size-sm">
                                                {{ creditLine.totalAvailment | currency :'₱' }}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-right px-2">
                                            <span class="text-dark-75 font-weight-bold font-size-sm">
                                                {{ creditLine.amount - creditLine.totalAvailment | currency :'₱'}}
                                            </span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bold font-size-sm">{{ creditLine.interestRate_amount }}%</span>
                                        </div>
                                    </td>
                                    <td>
                                        <div class="text-center px-2">
                                            <span class="text-dark-75 font-weight-bold font-size-sm">{{ creditLine.term_name }}</span>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary" ng-click="applyCreditLineAssignment(selectedCreditLine)">Apply</button>
                </div>
            </div>
        </div>
    </div>
</div>
